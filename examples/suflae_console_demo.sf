# Suflae Console I/O Demonstration
# Python-like syntax variant of RazorForge
# Demonstrates console input/output with indentation-based syntax

# ============================================================================
# Basic Print Operations
# ============================================================================

routine test_basic_printing():
    show_line("=== Basic Printing (Suflae) ===")
    show_line()

    # Print without newline
    show("Hello, ")
    show("Suflae!")
    show_line()  # Print newline

    # Print with newline
    show_line("This is Suflae - Python-like syntax for RazorForge")

    show_line()

# ============================================================================
# Printing Different Types
# ============================================================================

routine test_type_printing():
    show_line("=== Printing Different Types ===")
    show_line()

    # Integers
    show("s64: ")
    show_line(42_s64)

    show("u64: ")
    show_line(100_u64)

    # Floating point
    show("f64: ")
    show_line(3.14159_f64)

    # Boolean
    show("true: ")
    show_line(true)

    show("false: ")
    show_line(false)

    show_line()

# ============================================================================
# Arithmetic with User Input
# ============================================================================

routine test_arithmetic_demo():
    show_line("=== Arithmetic Calculator (Suflae) ===")
    show_line()

    show("Enter first number: ")
    flush()
    let a = read_s64()

    show("Enter second number: ")
    flush()
    let b = read_s64()

    show_line()
    show_line("Results:")

    show(a)
    show(" + ")
    show(b)
    show(" = ")
    show_line(a + b)

    show(a)
    show(" - ")
    show(b)
    show(" = ")
    show_line(a - b)

    show(a)
    show(" * ")
    show(b)
    show(" = ")
    show_line(a * b)

    if b != 0_s64:
        show(a)
        show(" / ")
        show(b)
        show(" = ")
        show_line(a / b)
    else:
        show_line("Cannot divide by zero!")

    show_line()

# ============================================================================
# Number Guessing Game (Suflae Style)
# ============================================================================

routine number_guessing_game():
    clear()
    show_line("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    show_line("â•‘    Number Guessing Game (Suflae)      â•‘")
    show_line("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    show_line()

    show_line("I'm thinking of a number between 1 and 100")
    show_line("Can you guess it?")
    show_line()

    # Secret number
    let secret: s32 = 42_s32
    var attempts: s32 = 0_s32
    var guess: s32 = 0_s32
    var game_over: bool = false

    while not game_over:
        show("Your guess: ")
        flush()

        guess = read_s32()
        attempts = attempts + 1_s32

        if guess < secret:
            show_line("ğŸ“‰ Too low! Try a higher number.")
        elif guess > secret:
            show_line("ğŸ“ˆ Too high! Try a lower number.")
        else:
            show_line()
            show_line("ğŸ‰ Congratulations!")
            show("You found the number ")
            show(secret)
            show(" in ")
            show(attempts)
            show_line(" attempts!")
            game_over = true

        show_line()

# ============================================================================
# Control Flow Examples
# ============================================================================

routine test_control_flow():
    show_line("=== Control Flow (Suflae Syntax) ===")
    show_line()

    # If-elif-else
    let x: s32 = 10_s32

    if x > 0_s32:
        show_line("x is positive")
    elif x < 0_s32:
        show_line("x is negative")
    else:
        show_line("x is zero")

    # While loop
    show_line()
    show_line("Counting to 5:")
    var i: s32 = 1_s32
    while i <= 5_s32:
        show(i)
        show(" ")
        i = i + 1_s32
    show_line()

    show_line()

# ============================================================================
# Fibonacci Calculator (Suflae)
# ============================================================================

routine fibonacci_suflae(n: s64) -> s64:
    if n <= 1_s64:
        return n
    else:
        var a: s64 = 0_s64
        var b: s64 = 1_s64
        var i: s64 = 2_s64

        while i <= n:
            let temp = a + b
            a = b
            b = temp
            i = i + 1_s64

        return b

routine fibonacci_calculator():
    show_line("=== Fibonacci Calculator (Suflae) ===")
    show_line()

    show("Enter n (0-92): ")
    flush()
    let n = read_s64()

    if n < 0_s64:
        show_line("Error: n must be non-negative")
    elif n > 92_s64:
        show_line("Error: n too large (max 92 for s64)")
    else:
        let result = fibonacci_suflae(n)
        show("fibonacci(")
        show(n)
        show(") = ")
        show_line(result)

        # Show sequence
        show_line()
        show_line("Sequence:")
        var i: s64 = 0_s64
        while i <= n:
            show(fibonacci_suflae(i))
            if i < n:
                show(", ")
            i = i + 1_s64
        show_line()

    show_line()

# ============================================================================
# Prime Number Checker (Suflae)
# ============================================================================

routine is_prime(n: s64) -> bool:
    if n <= 1_s64:
        return false
    elif n <= 3_s64:
        return true
    elif n % 2_s64 == 0_s64:
        return false
    elif n % 3_s64 == 0_s64:
        return false
    else:
        var i: s64 = 5_s64
        var result: bool = true

        while i * i <= n and result:
            if n % i == 0_s64:
                result = false
            elif n % (i + 2_s64) == 0_s64:
                result = false

            i = i + 6_s64

        return result

routine prime_checker():
    show_line("=== Prime Number Checker (Suflae) ===")
    show_line()

    show("Enter a number: ")
    flush()
    let n = read_s64()

    show_line()
    show(n)

    if is_prime(n):
        show_line(" is PRIME! âœ“")
    else:
        show_line(" is NOT prime. âœ—")

    # Show prime factors if not prime
    if not is_prime(n) and n > 1_s64:
        show_line()
        show_line("Prime factors:")

        var num = n
        var factor: s64 = 2_s64

        while factor * factor <= num:
            while num % factor == 0_s64:
                show(factor)
                show(" ")
                num = num / factor

            factor = factor + 1_s64

        if num > 1_s64:
            show(num)
            show(" ")

        show_line()

    show_line()

# ============================================================================
# Interactive Menu (Suflae)
# ============================================================================

routine show_menu():
    clear()
    show_line("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    show_line("â•‘    Suflae Console Demo Menu            â•‘")
    show_line("â•‘    (Python-like syntax)                â•‘")
    show_line("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    show_line()
    show_line("1. Basic Printing Demo")
    show_line("2. Type Printing Demo")
    show_line("3. Arithmetic Calculator")
    show_line("4. Number Guessing Game")
    show_line("5. Control Flow Examples")
    show_line("6. Fibonacci Calculator")
    show_line("7. Prime Number Checker")
    show_line("0. Exit")
    show_line()
    show("Select an option (0-7): ")
    flush()

routine interactive_menu():
    var running: bool = true

    while running:
        show_menu()
        let choice = read_s32()
        show_line()

        if choice == 1_s32:
            test_basic_printing()
        elif choice == 2_s32:
            test_type_printing()
        elif choice == 3_s32:
            test_arithmetic_demo()
        elif choice == 4_s32:
            number_guessing_game()
        elif choice == 5_s32:
            test_control_flow()
        elif choice == 6_s32:
            fibonacci_calculator()
        elif choice == 7_s32:
            prime_checker()
        elif choice == 0_s32:
            show_line("Goodbye! Thanks for using Suflae!")
            running = false
        else:
            show_line("âŒ Invalid option! Please select 0-7.")

        if running:
            show_line()
            show("Press Enter to continue...")
            flush()
            let _ = read_char()

# ============================================================================
# Main Entry Point
# ============================================================================

routine start():
    # Run the interactive menu
    interactive_menu()

# Alternative: Run all demos sequentially
routine run_all_demos():
    test_basic_printing()
    test_type_printing()
    test_arithmetic_demo()
    test_control_flow()

    show_line("All Suflae demos completed!")
