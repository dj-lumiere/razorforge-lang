{
  "fileTypes": [
    "sf"
  ],
  "name": "Suflae",
  "scopeName": "source.sf",
  "patterns": [
    {
      "include": "#keywords"
    },
    {
      "include": "#suflae-keywords"
    },
    {
      "include": "#constants"
    },
    {
      "include": "#types"
    },
    {
      "include": "#strings"
    },
    {
      "include": "#comments"
    },
    {
      "include": "#numbers"
    },
    {
      "include": "#operators"
    },
    {
      "include": "#functions"
    },
    {
      "include": "#attributes"
    },
    {
      "include": "#suflae-tasks"
    },
    {
      "include": "#suflae-addins"
    },
    {
      "include": "#suflae-tools"
    }
  ],
  "repository": {
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.sf",
          "match": "\\b(if|elif|else|then|unless|when|is|while|for|loop|in|to|step|break|continue|return|throw|from|follows|isnot|notfrom|notin|notfollows)\\b"
        },
        {
          "name": "keyword.declaration.class.sf",
          "match": "\\b(class)\\b"
        },
        {
          "name": "keyword.declaration.struct.sf",
          "match": "\\b(struct)\\b"
        },
        {
          "name": "keyword.declaration.sf",
          "match": "\\b(routine|option|chimera|variant|mutant|feature)\\b"
        },
        {
          "name": "keyword.storage.sf",
          "match": "\\b(let|var|preset|common|danger|mayhem)\\b"
        },
        {
          "name": "keyword.modifier.sf",
          "match": "\\b(private|public\\(family\\)|public\\(module\\)|public|global|external)\\b"
        },
        {
          "name": "keyword.self.sf",
          "match": "\\b(me|parent)\\b"
        },
        {
          "name": "keyword.logical.sf",
          "match": "\\b(and|or|not)\\b"
        },
        {
          "name": "keyword.other.sf",
          "match": "\\b(import|define|using|as|pass|with|requires)\\b"
        }
      ]
    },
    "suflae-keywords": {
      "patterns": [
        {
          "match": "\\b(Task|RunTarget|Argument|EnvironmentVariable|HasArgument|HasEnvironmentVariable|Setup|Teardown|TaskSetup|TaskTeardown|Information|Warning|Error|Verbose|Debug)\\b",
          "name": "keyword.other.sf"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "constant.language.sf",
          "match": "\\b(true|false|none|null)\\b"
        }
      ]
    },
    "suflae-tasks": {
      "patterns": [
        {
          "match": "\\b(Task)\\s*\\(\\s*\"([^\"]+)\"\\s*\\)",
          "captures": {
            "1": {
              "name": "keyword.other.sf"
            },
            "2": {
              "name": "entity.name.function.sf"
            }
          }
        },
        {
          "match": "\\.(Description|Does|IsDependentOn|IsDependeeOf|WithCriteria|OnError|Finally|ReportError|ContinueOnError|Defer)\\b",
          "name": "support.function.sf"
        }
      ]
    },
    "suflae-addins": {
      "patterns": [
        {
          "match": "^\\s*(#addin|#tool|#load|#reference|#break)\\b",
          "name": "keyword.preprocessor.sf"
        },
        {
          "match": "(nuget|paket):",
          "name": "keyword.other.sf"
        }
      ]
    },
    "suflae-tools": {
      "patterns": [
        {
          "match": "\\b(DotNetCore\\w+|MSBuild|NuGet\\w+|GitVersion|OpenCover|ReportGenerator|XUnit2|NUnit3|VSTest|Chocolatey|ILMerge|SignTool|WiX|InnoSetup|Squirrel|OctopusDeploy|TeamCity|AppVeyor|Jenkins|AzureDevOps|Docker\\w+|Kubernetes\\w+|Terraform\\w+)\\b",
          "name": "support.class.sf"
        }
      ]
    },
    "types": {
      "patterns": [
        {
          "match": "\\b(ISuflaeContext|FilePath|DirectoryPath|FilePathCollection|DirectoryPathCollection|ProcessSettings|ToolSettings|Globber|IFileSystem|IEnvironment|IProcessRunner|IRegistry|IToolLocator|ISuflaeLog|ISuflaeArguments|ISuflaeConfiguration|ISuflaeDataService)\\b",
          "name": "support.type.sf"
        },
        {
          "match": "\\b(string|int|bool|double|float|decimal|long|short|byte|char|uint|ulong|ushort|sbyte|object|dynamic|var)\\b",
          "name": "storage.type.sf"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "begin": "\"",
          "end": "\"",
          "name": "string.quoted.double.sf",
          "patterns": [
            {
              "match": "\\\\.",
              "name": "constant.character.escape.sf"
            }
          ]
        },
        {
          "begin": "'",
          "end": "'",
          "name": "string.quoted.single.sf",
          "patterns": [
            {
              "match": "\\\\.",
              "name": "constant.character.escape.sf"
            }
          ]
        },
        {
          "begin": "@\"",
          "end": "\"",
          "name": "string.quoted.verbatim.sf",
          "patterns": [
            {
              "match": "\"\"",
              "name": "constant.character.escape.sf"
            }
          ]
        },
        {
          "begin": "\\$\"",
          "end": "\"",
          "name": "string.interpolated.sf",
          "patterns": [
            {
              "begin": "\\{",
              "end": "\\}",
              "name": "meta.interpolation.sf",
              "patterns": [
                {
                  "include": "#keywords"
                },
                {
                  "include": "#types"
                },
                {
                  "include": "#operators"
                }
              ]
            },
            {
              "match": "\\\\.",
              "name": "constant.character.escape.sf"
            }
          ]
        }
      ]
    },
    "comments": {
      "patterns": [
        {
          "begin": "/\\*",
          "end": "\\*/",
          "name": "comment.block.sf"
        },
        {
          "match": "#.*$",
          "name": "comment.line.hash.sf"
        },
        {
          "begin": "///",
          "end": "$",
          "name": "comment.documentation.sf"
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "match": "\\b(0x[0-9a-fA-F]+|0b[01]+|\\d+(\\.\\d+)?([eE][+-]?\\d+)?[fFdDmM]?)\\b",
          "name": "constant.numeric.sf"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "match": "(\\+\\+|--|\\+=|-=|\\*=|/=|%=|&=|\\|=|\\^=|<<=|>>=|\\?\\?=)",
          "name": "keyword.operator.assignment.sf"
        },
        {
          "match": "(==|!=|<=|>=|<|>)",
          "name": "keyword.operator.comparison.sf"
        },
        {
          "match": "(&&|\\|\\||!)",
          "name": "keyword.operator.logical.sf"
        },
        {
          "match": "(\\+|-|\\*|/|%)",
          "name": "keyword.operator.arithmetic.sf"
        },
        {
          "match": "(&|\\||\\^|~|<<|>>)",
          "name": "keyword.operator.bitwise.sf"
        },
        {
          "match": "(\\?|:)",
          "name": "keyword.operator.ternary.sf"
        },
        {
          "match": "(=>|->)",
          "name": "keyword.operator.lambda.sf"
        }
      ]
    },
    "functions": {
      "patterns": [
        {
          "match": "\\b([A-Za-z_][A-Za-z0-9_]*)\\s*(?=\\()",
          "name": "entity.name.function.sf"
        }
      ]
    },
    "attributes": {
      "patterns": [
        {
          "begin": "\\[",
          "end": "\\]",
          "name": "meta.attribute.sf",
          "patterns": [
            {
              "match": "\\b[A-Za-z_][A-Za-z0-9_]*\\b",
              "name": "entity.name.type.attribute.sf"
            }
          ]
        }
      ]
    }
  }
}
