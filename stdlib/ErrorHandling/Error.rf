record Error {
    public message: Text
    public code: s32?

    routine from_text(message: Text) -> Error {
        return Error { message: message, code: none }
    }

    routine from_code(message: Text, code: s32) -> Error {
        return Error { message: message, code: Some(code) }
    }

    routine to_text(self) -> Text {
        when self.code {
            Some(c) => f"Error {c}: {self.message}",
            None => self.message
        }
    }
}