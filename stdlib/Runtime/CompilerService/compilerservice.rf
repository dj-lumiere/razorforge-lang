# CompilerService - Compile-time information available at runtime
# All functions are compiler intrinsics with zero runtime overhead
# Data is embedded during compilation

# ============================================================================
# Type Information
# ============================================================================
namespace Runtime/CompilerService

# Returns the memory size of the type in bytes
# Compiler intrinsic: replaced with constant at compile time
# Called as: T.data_size() where T is a type
@intrinsic("size_of")
routine data_size<T>() -> MemorySize

# Returns the memory alignment requirement of the type
# Called as: T.align_size() where T is a type
@intrinsic("align_of")
routine align_size<T>() -> MemorySize

# Returns the compile-time type name as it appears in source code
# Example: T.type_name() returns "List<s32>" for List<s32>
@intrinsic("get_compile_type_name")
routine type_name<T>() -> Text

# Returns a list of field names for records and entities
@intrinsic("field_names")
routine field_names<T>() -> List<Text>

# Returns the number of fields in the type
@intrinsic("field_count")
routine field_count<T>() -> s64

# ============================================================================
# Source Location
# ============================================================================

# Returns the current line number in source code
@intrinsic("get_line_number")
routine get_line_number() -> s64

# Returns the current column position in source code
@intrinsic("get_column_number")
routine get_column_number() -> s64

# Returns the current source file name
@intrinsic("get_file_name")
routine get_file_name() -> Text

# Returns the name of the calling function
@intrinsic("get_caller_name")
routine get_caller_name() -> Text

# Returns the variable name as it appears in source code
# Called as: variable.var_name()
@intrinsic("get_variable_name")
routine var_name<T>(value: T) -> Text

# ============================================================================
# Module and Attributes
# ============================================================================

# Returns the current module name
@intrinsic("get_current_module")
routine get_current_module() -> Text

# ============================================================================
# Method Inspection
# ============================================================================

# Checks if a type has a method with the given name at compile time
@intrinsic("has_method")
routine has_method<T>(name: Text) -> bool
